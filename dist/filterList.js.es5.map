{"version":3,"sources":["filterList.js"],"names":["FilterList","getUrlParameter","sParam","sPageURL","decodeURIComponent","window","location","search","substring","sURLVariables","split","sParameterName","i","length","undefined","updateQueryStringParameter","uri","key","value","re","RegExp","separator","indexOf","match","replace","removeURLParameter","url","parameter","urlparts","prefix","encodeURIComponent","pars","lastIndexOf","splice","join","options","urlIsUpdatable","element","filters","filterNames","getAttribute","initCallback","filtersCallback","href","lastClass","hiddenClass","setEventHandlers","setDefaultFilters","updateFiltersfromURL","updateBrowserHistory","applyFilters","history","pushState","state","slice","replaceState","document","title","forEach","filterName","ignoreValue","getFilterIgnoreValue","filterValue","getFilterValue","push","name","filterElement","querySelector","tagName","console","warn","checked","newValue","updateFilters","updatedFilter","triggerEvent","filter","find","updateDOM","addEventListener","updateURL","e","prop","filtersArray","property","item","matchedItems","listItems","children","lastVisibleElement","classList","remove","matched","hasAttribute","el","add","Object","assign"],"mappings":"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","sourcesContent":["var FilterList = (function () {\n'use strict';\n\nfunction getUrlParameter(sParam) {\n\tvar sPageURL = decodeURIComponent(window.location.search.substring(1)),\n\t\tsURLVariables = sPageURL.split('&'),\n\t\tsParameterName,\n\t\ti;\n\n\tfor (i = 0; i < sURLVariables.length; i++) {\n\t\tsParameterName = sURLVariables[i].split('=');\n\n\t\tif (sParameterName[0] === sParam) {\n\t\t\treturn sParameterName[1] === undefined ? true : sParameterName[1];\n\t\t}\n\t}\n}\n\nfunction updateQueryStringParameter(uri, key, value) {\n\tvar re = new RegExp(\"([?&])\" + key + \"=.*?(&|$)\", \"i\");\n\tvar separator = uri.indexOf('?') !== -1 ? \"&\" : \"?\";\n\n\tif (uri.match(re)) {\n\t\treturn uri.replace(re, '$1' + key + \"=\" + value + '$2');\n\t} else {\n\t\treturn uri + separator + key + \"=\" + value;\n\t}\n}\n\nfunction removeURLParameter(url, parameter) {\n    //prefer to use l.search if you have a location/link object\n    var urlparts= url.split('?');\n    if (urlparts.length >= 2) {\n        var prefix= encodeURIComponent(parameter)+'=';\n        var pars= urlparts[1].split(/[&;]/g);\n\n        //reverse iteration as may be destructive\n        for (var i= pars.length; i-- > 0;) {\n            //idiom for string.startsWith\n            if (pars[i].lastIndexOf(prefix, 0) !== -1) {\n                pars.splice(i, 1);\n            }\n        }\n\n        url= urlparts[0] + (pars.length > 0 ? '?' + pars.join('&') : \"\");\n        return url;\n    } else {\n        return url;\n    }\n}\n\n/*\n * @name          filterList.js\n * @version       3.1.0\n * @lastmodified  2018-02-06\n * @author        Saeid Mohadjer\n * @repo\t\t  https://github.com/smohadjer/filterList\n *\n * Licensed under the MIT License\n */\n\n'use strict';\n\nclass FilterList {\n\tconstructor(options) {\n\t\tthis.urlIsUpdatable = (options.urlIsUpdatable === undefined) ? false : options.urlIsUpdatable;\n\t\tthis.element = options.element;\n\t\tthis.filters = [];\n\t\tthis.filterNames = this.element.getAttribute('data-filter-names').split(' ');\n\t\tthis.initCallback = options.initCallback;\n\t\tthis.filtersCallback = options.filtersCallback;\n\t\tthis.url = window.location.href;\n\t\tthis.lastClass = options.lastClass || 'last';\n\t\tthis.hiddenClass = options.hiddenClass || 'hidden';\n\n\t\tthis.setEventHandlers();\n\t\tthis.setDefaultFilters(this.filterNames);\n\t\tthis.updateFiltersfromURL();\n\t\tthis.updateBrowserHistory();\n\n\t\tif (typeof this.initCallback === 'function') {\n\t\t\tthis.initCallback();\n\t\t}\n\n\t\tthis.applyFilters();\n\t}\n\n\tupdateBrowserHistory() {\n\t\tif (this.urlIsUpdatable && window.history && window.history.pushState) {\n\t\t\tlet state = {};\n\t\t\tstate.filters = this.filters.slice();\n\t\t\thistory.replaceState(state, document.title, this.url);\n\t\t}\n\t}\n\n\tsetDefaultFilters(filterNames) {\n\t\tfilterNames.forEach((filterName) => {\n\t\t\tconst ignoreValue = this.getFilterIgnoreValue(filterName);\n\t\t\tconst filterValue = this.getFilterValue(filterName);\n\n\t\t\tthis.filters.push({\n\t\t\t\tname: filterName,\n\t\t\t\tvalue: filterValue,\n\t\t\t\tignoreValue: ignoreValue\n\t\t\t});\n\t\t});\n\t}\n\n\tgetFilterIgnoreValue(filterName) {\n\t\tconst filterElement = document.querySelector(`[name=\"${filterName}\"]`);\n\t\tlet ignoreValue;\n\n\t\tif (filterElement) {\n\t\t\tif (filterElement.tagName === 'SELECT') {\n\t\t\t\tignoreValue = filterElement.getAttribute('data-ignore');\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.warn('No filter with name ' + filterName + ' was found in markup!');\n\t\t}\n\n\t\treturn ignoreValue;\n\t}\n\n\tgetFilterValue(filterName) {\n\t\tconst filterElement = document.querySelector(`[name=\"${filterName}\"]`);\n\t\tlet filterValue;\n\n\t\tif (filterElement) {\n\t\t\tif (filterElement.getAttribute('type') === 'checkbox') {\n\t\t\t\tfilterValue = filterElement.checked ? filterElement.value : undefined;\n\t\t\t} else {\n\t\t\t\tfilterValue = filterElement.value;\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.warn('No filter with name ' + filterName + ' was found in markup!');\n\t\t}\n\n\t\treturn filterValue;\n\t}\n\n\tupdateFiltersfromURL() {\n\t\tthis.filterNames.forEach((filterName) => {\n\t\t\tconst newValue = getUrlParameter(filterName);\n\n\t\t\tif (newValue) {\n\t\t\t\tthis.updateFilters({\n\t\t\t\t\tname: filterName,\n\t\t\t\t\tvalue: newValue\n\t\t\t\t}, true);\n\t\t\t}\n\t\t});\n\t}\n\n\tupdateFilters(updatedFilter, triggerEvent) {\n\t\tlet filter = this.filters.find((filter) => filter.name === updatedFilter.name);\n\n\t\tif (filter && filter.value !== updatedFilter.value) {\n\t\t\tfilter.value = updatedFilter.value;\n\t\t\tthis.applyFilters();\n\n\t\t\tif (triggerEvent) {\n\t\t\t\tthis.updateDOM([filter]);\n\t\t\t}\n\t\t}\n\t}\n\n\tsetEventHandlers() {\n\t\tthis.filterNames.forEach((filterName) => {\n\t\t\tconst filterElement = document.querySelector('[name=\"' + filterName + '\"]');\n\n\t\t\tif (filterElement) {\n\t\t\t\tfilterElement.addEventListener('change', () => {\n\t\t\t\t\tthis.updateFilters({\n\t\t\t\t\t\tname: filterName,\n\t\t\t\t\t\tvalue: this.getFilterValue(filterName)\n\t\t\t\t\t});\n\n\t\t\t\t\tif (this.urlIsUpdatable) {\n\t\t\t\t\t\tthis.updateURL();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tif (this.urlIsUpdatable && window.history && window.history.pushState) {\n\t\t\twindow.addEventListener(\"popstate\", (e) => {\n\t\t\t\tif (e.state.filters) {\n\t\t\t\t\tfor (let prop in e.state.filters) {\n\t\t\t\t\t\tthis.filters[prop] = e.state.filters[prop];\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.updateDOM(e.state.filters);\n\t\t\t\t\tthis.applyFilters();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tupdateDOM(filtersArray) {\n\t\tfor (let i in filtersArray) {\n\t\t\tlet filter = filtersArray[i];\n\t\t\tlet filterElement = document.querySelector(`[name=\"${filter.name}\"]`);\n\n\t\t\tif (filterElement) {\n\t\t\t\tif (filterElement.tagName === 'SELECT') {\n\t\t\t\t\tfilterElement.value = filter.value;\n\t\t\t\t}\n\n\t\t\t\tif (filterElement.tagName === 'INPUT') {\n\t\t\t\t\tif (filterElement.getAttribute('type') === 'checkbox') {\n\t\t\t\t\t\tfilterElement.checked = (filterElement.value === filter.value) ? true : false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//public method for changing filters\n\tsetFilters(filters) {\n\t\tfor (let property in filters) {\n\t\t\tthis.filters.forEach(function(item) {\n\t\t\t\tif (item.name === property) {\n\t\t\t\t\titem.value = filters[property];\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.updateDOM(this.filters);\n\t\tthis.applyFilters();\n\n\t\tif (this.urlIsUpdatable) {\n\t\t\tthis.updateURL();\n\t\t}\n\t}\n\n\tapplyFilters() {\n\t\tlet matchedItems = [];\n\t\tconst listItems = this.element.children;\n\n\t\tif (this.lastClass) {\n\t\t\tlet lastVisibleElement = this.element.querySelector(`.${this.lastClass}`);\n\t\t\tif (lastVisibleElement) {\n\t\t\t\tlastVisibleElement.classList.remove(this.lastClass);\n\t\t\t}\n\t\t}\n\n\t\t// If filters are set, only items whose data attributes\n\t\t//match all the set filters would show\n\t\t[...listItems].forEach((element) => {\n\t\t\tlet matched = true;\n\n\t\t\tthis.filters.forEach(function(filter) {\n\t\t\t\tif (filter.value !== undefined && filter.value !== filter.ignoreValue) {\n\t\t\t\t\t//any list item that doesn't have attribute for this filter or\n\t\t\t\t\t//has attribute for this filter with another value should\n\t\t\t\t\t//be filtered out.\n\t\t\t\t\tif (!element.hasAttribute('data-filter-' + filter.name) || element.getAttribute('data-filter-' + filter.name) !== filter.value) {\n\t\t\t\t\t\tmatched = false;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (matched) {\n\t\t\t\tmatchedItems.push(element);\n\t\t\t}\n\t\t});\n\n\t\t[...listItems].forEach((el) => {\n\t\t\tel.classList.add(this.hiddenClass);\n\t\t});\n\n\t\tif (matchedItems.length !== 0) {\n\t\t\tmatchedItems.forEach((item, i) => {\n\t\t\t\titem.classList.remove(this.hiddenClass);\n\n\t\t\t\t//add a class to last visible item in the list in case last item in list needs special styling\n\t\t\t\tif (this.lastClass && i === matchedItems.length - 1) {\n\t\t\t\t\titem.classList.add(this.lastClass);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.element.classList.remove('is-empty');\n\t\t} else {\n\t\t\tthis.element.classList.add('is-empty');\n\t\t}\n\n\t\tif (typeof this.filtersCallback === 'function') {\n\t\t\tthis.filtersCallback();\n\t\t}\n\t}\n\n\tupdateURL() {\n\t\tif (window.history && window.history.pushState)\t{\n\t\t\tlet state = {};\n\t\t\tstate.filters = Object.assign({}, this.filters);\n\n\t\t\tthis.filters.forEach((filter) => {\n\t\t\t\tif (filter.value !== undefined && filter.value.length !== 0 && filter.value !== filter.ignoreValue) {\n\t\t\t\t\tthis.url = updateQueryStringParameter(this.url, filter.name, filter.value);\n\t\t\t\t} else {\n\t\t\t\t\tthis.url = removeURLParameter(this.url, filter.name);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\thistory.pushState(state, document.title, this.url);\n\t\t}\n\t}\n}\n\nreturn FilterList;\n\n}());\n//# sourceMappingURL=filterList.js.map\n"],"file":"filterList.js"}