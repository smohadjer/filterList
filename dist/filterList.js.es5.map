{"version":3,"sources":["filterList.js"],"names":["FilterList","getUrlParameter","sParam","sPageURL","decodeURIComponent","window","location","search","substring","sURLVariables","split","sParameterName","i","length","undefined","updateQueryStringParameter","uri","key","value","re","RegExp","separator","indexOf","match","replace","removeURLParameter","url","parameter","urlparts","prefix","encodeURIComponent","pars","lastIndexOf","splice","join","options","urlIsUpdatable","element","filters","filterNames","getAttribute","initCallback","filtersCallback","href","lastClass","hiddenClass","setEventHandlers","setDefaultFilters","updateFiltersfromURL","updateBrowserHistory","applyFilters","history","pushState","state","slice","replaceState","document","title","forEach","filterName","ignoreValue","getFilterIgnoreValue","filterValue","getFilterValue","push","name","filterElement","querySelector","tagName","console","warn","checked","newValue","updateFilters","updatedFilter","triggerEvent","filter","find","updateDOM","addEventListener","updateURL","e","prop","filtersArray","property","item","matchedItems","listItems","children","lastVisibleElement","classList","remove","matched","hasAttribute","el","add","Object","assign"],"mappings":"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","file":"filterList.js","sourcesContent":["var FilterList = (function () {\n'use strict';\n\nfunction getUrlParameter(sParam) {\n\tvar sPageURL = decodeURIComponent(window.location.search.substring(1)),\n\t\tsURLVariables = sPageURL.split('&'),\n\t\tsParameterName,\n\t\ti;\n\n\tfor (i = 0; i < sURLVariables.length; i++) {\n\t\tsParameterName = sURLVariables[i].split('=');\n\n\t\tif (sParameterName[0] === sParam) {\n\t\t\treturn sParameterName[1] === undefined ? true : sParameterName[1];\n\t\t}\n\t}\n}\n\nfunction updateQueryStringParameter(uri, key, value) {\n\tvar re = new RegExp(\"([?&])\" + key + \"=.*?(&|$)\", \"i\");\n\tvar separator = uri.indexOf('?') !== -1 ? \"&\" : \"?\";\n\n\tif (uri.match(re)) {\n\t\treturn uri.replace(re, '$1' + key + \"=\" + value + '$2');\n\t} else {\n\t\treturn uri + separator + key + \"=\" + value;\n\t}\n}\n\nfunction removeURLParameter(url, parameter) {\n    //prefer to use l.search if you have a location/link object\n    var urlparts= url.split('?');\n    if (urlparts.length >= 2) {\n        var prefix= encodeURIComponent(parameter)+'=';\n        var pars= urlparts[1].split(/[&;]/g);\n\n        //reverse iteration as may be destructive\n        for (var i= pars.length; i-- > 0;) {\n            //idiom for string.startsWith\n            if (pars[i].lastIndexOf(prefix, 0) !== -1) {\n                pars.splice(i, 1);\n            }\n        }\n\n        url= urlparts[0] + (pars.length > 0 ? '?' + pars.join('&') : \"\");\n        return url;\n    } else {\n        return url;\n    }\n}\n\n/*\n * @name          filterList.js\n * @version       3.1.0\n * @lastmodified  2018-02-06\n * @author        Saeid Mohadjer\n * @repo\t\t  https://github.com/smohadjer/filterList\n *\n * Licensed under the MIT License\n */\n\n'use strict';\n\nclass FilterList {\n\tconstructor(options) {\n\t\tthis.urlIsUpdatable = (options.urlIsUpdatable === undefined) ? false : options.urlIsUpdatable;\n\t\tthis.element = options.element;\n\t\tthis.filters = [];\n\t\tthis.filterNames = this.element.getAttribute('data-filter-names').split(' ');\n\t\tthis.initCallback = options.initCallback;\n\t\tthis.filtersCallback = options.filtersCallback;\n\t\tthis.url = window.location.href;\n\t\tthis.lastClass = options.lastClass || 'last';\n\t\tthis.hiddenClass = options.hiddenClass || 'hidden';\n\n\t\tthis.setEventHandlers();\n\t\tthis.setDefaultFilters(this.filterNames);\n\t\tthis.updateFiltersfromURL();\n\t\tthis.updateBrowserHistory();\n\n\t\tif (typeof this.initCallback === 'function') {\n\t\t\tthis.initCallback();\n\t\t}\n\n\t\tthis.applyFilters();\n\t}\n\n\tupdateBrowserHistory() {\n\t\tif (this.urlIsUpdatable && window.history && window.history.pushState) {\n\t\t\tlet state = {};\n\t\t\tstate.filters = this.filters.slice();\n\t\t\thistory.replaceState(state, document.title, this.url);\n\t\t}\n\t}\n\n\tsetDefaultFilters(filterNames) {\n\t\tfilterNames.forEach((filterName) => {\n\t\t\tconst ignoreValue = this.getFilterIgnoreValue(filterName);\n\t\t\tconst filterValue = this.getFilterValue(filterName);\n\n\t\t\tthis.filters.push({\n\t\t\t\tname: filterName,\n\t\t\t\tvalue: filterValue,\n\t\t\t\tignoreValue: ignoreValue\n\t\t\t});\n\t\t});\n\t}\n\n\tgetFilterIgnoreValue(filterName) {\n\t\tconst filterElement = document.querySelector(`[name=\"${filterName}\"]`);\n\t\tlet ignoreValue;\n\n\t\tif (filterElement) {\n\t\t\tif (filterElement.tagName === 'SELECT') {\n\t\t\t\tignoreValue = filterElement.getAttribute('data-ignore');\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.warn('No filter with name ' + filterName + ' was found in markup!');\n\t\t}\n\n\t\treturn ignoreValue;\n\t}\n\n\tgetFilterValue(filterName) {\n\t\tconst filterElement = document.querySelector(`[name=\"${filterName}\"]`);\n\t\tlet filterValue;\n\n\t\tif (filterElement) {\n\t\t\tif (filterElement.getAttribute('type') === 'checkbox') {\n\t\t\t\tfilterValue = filterElement.checked ? filterElement.value : undefined;\n\t\t\t} else {\n\t\t\t\tfilterValue = filterElement.value;\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.warn('No filter with name ' + filterName + ' was found in markup!');\n\t\t}\n\n\t\treturn filterValue;\n\t}\n\n\tupdateFiltersfromURL() {\n\t\tthis.filterNames.forEach((filterName) => {\n\t\t\tconst newValue = getUrlParameter(filterName);\n\n\t\t\tif (newValue) {\n\t\t\t\tthis.updateFilters({\n\t\t\t\t\tname: filterName,\n\t\t\t\t\tvalue: newValue\n\t\t\t\t}, true);\n\t\t\t}\n\t\t});\n\t}\n\n\tupdateFilters(updatedFilter, triggerEvent) {\n\t\tlet filter = this.filters.find((filter) => filter.name === updatedFilter.name);\n\n\t\tif (filter && filter.value !== updatedFilter.value) {\n\t\t\tfilter.value = updatedFilter.value;\n\t\t\tthis.applyFilters();\n\n\t\t\tif (triggerEvent) {\n\t\t\t\tthis.updateDOM([filter]);\n\t\t\t}\n\t\t}\n\t}\n\n\tsetEventHandlers() {\n\t\tthis.filterNames.forEach((filterName) => {\n\t\t\tconst filterElement = document.querySelector('[name=\"' + filterName + '\"]');\n\n\t\t\tif (filterElement) {\n\t\t\t\tfilterElement.addEventListener('change', () => {\n\t\t\t\t\tthis.updateFilters({\n\t\t\t\t\t\tname: filterName,\n\t\t\t\t\t\tvalue: this.getFilterValue(filterName)\n\t\t\t\t\t});\n\n\t\t\t\t\tif (this.urlIsUpdatable) {\n\t\t\t\t\t\tthis.updateURL();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tif (this.urlIsUpdatable && window.history && window.history.pushState) {\n\t\t\twindow.addEventListener(\"popstate\", (e) => {\n\t\t\t\tif (e.state.filters) {\n\t\t\t\t\tfor (let prop in e.state.filters) {\n\t\t\t\t\t\tthis.filters[prop] = e.state.filters[prop];\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.updateDOM(e.state.filters);\n\t\t\t\t\tthis.applyFilters();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tupdateDOM(filtersArray) {\n\t\tfor (let i in filtersArray) {\n\t\t\tlet filter = filtersArray[i];\n\t\t\tlet filterElement = document.querySelector(`[name=\"${filter.name}\"]`);\n\n\t\t\tif (filterElement) {\n\t\t\t\tif (filterElement.tagName === 'SELECT') {\n\t\t\t\t\tfilterElement.value = filter.value;\n\t\t\t\t}\n\n\t\t\t\tif (filterElement.tagName === 'INPUT') {\n\t\t\t\t\tif (filterElement.getAttribute('type') === 'checkbox') {\n\t\t\t\t\t\tfilterElement.checked = (filterElement.value === filter.value) ? true : false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//public method for changing filters\n\tsetFilters(filters) {\n\t\tfor (let property in filters) {\n\t\t\tthis.filters.forEach(function(item) {\n\t\t\t\tif (item.name === property) {\n\t\t\t\t\titem.value = filters[property];\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.updateDOM(this.filters);\n\t\tthis.applyFilters();\n\n\t\tif (this.urlIsUpdatable) {\n\t\t\tthis.updateURL();\n\t\t}\n\t}\n\n\tapplyFilters() {\n\t\tlet matchedItems = [];\n\t\tconst listItems = this.element.children;\n\n\t\tif (this.lastClass) {\n\t\t\tlet lastVisibleElement = this.element.querySelector(`.${this.lastClass}`);\n\t\t\tif (lastVisibleElement) {\n\t\t\t\tlastVisibleElement.classList.remove(this.lastClass);\n\t\t\t}\n\t\t}\n\n\t\t// If filters are set, only items whose data attributes\n\t\t//match all the set filters would show\n\t\t[...listItems].forEach((element) => {\n\t\t\tlet matched = true;\n\n\t\t\tthis.filters.forEach(function(filter) {\n\t\t\t\tif (filter.value !== undefined && filter.value !== filter.ignoreValue) {\n\t\t\t\t\t//any list item that doesn't have attribute for this filter or\n\t\t\t\t\t//has attribute for this filter with another value should\n\t\t\t\t\t//be filtered out.\n\t\t\t\t\tif (!element.hasAttribute('data-filter-' + filter.name) || element.getAttribute('data-filter-' + filter.name) !== filter.value) {\n\t\t\t\t\t\tmatched = false;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (matched) {\n\t\t\t\tmatchedItems.push(element);\n\t\t\t}\n\t\t});\n\n\t\t[...listItems].forEach((el) => {\n\t\t\tel.classList.add(this.hiddenClass);\n\t\t});\n\n\t\tif (matchedItems.length !== 0) {\n\t\t\tmatchedItems.forEach((item, i) => {\n\t\t\t\titem.classList.remove(this.hiddenClass);\n\n\t\t\t\t//add a class to last visible item in the list in case last item in list needs special styling\n\t\t\t\tif (this.lastClass && i === matchedItems.length - 1) {\n\t\t\t\t\titem.classList.add(this.lastClass);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.element.classList.remove('is-empty');\n\t\t} else {\n\t\t\tthis.element.classList.add('is-empty');\n\t\t}\n\n\t\tif (typeof this.filtersCallback === 'function') {\n\t\t\tthis.filtersCallback();\n\t\t}\n\t}\n\n\tupdateURL() {\n\t\tif (window.history && window.history.pushState)\t{\n\t\t\tlet state = {};\n\t\t\tstate.filters = Object.assign({}, this.filters);\n\n\t\t\tthis.filters.forEach((filter) => {\n\t\t\t\tif (filter.value !== undefined && filter.value.length !== 0 && filter.value !== filter.ignoreValue) {\n\t\t\t\t\tthis.url = updateQueryStringParameter(this.url, filter.name, filter.value);\n\t\t\t\t} else {\n\t\t\t\t\tthis.url = removeURLParameter(this.url, filter.name);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\thistory.pushState(state, document.title, this.url);\n\t\t}\n\t}\n}\n\nreturn FilterList;\n\n}());\n//# sourceMappingURL=filterList.js.map\n"]}