{"version":3,"sources":["filterList.js"],"names":["FilterList","options","urlIsUpdatable","undefined","element","filters","filterNames","getAttribute","split","initCallback","filtersCallback","url","window","location","href","lastClass","hiddenClass","setEventHandlers","setDefaultFilters","updateFiltersfromURL","updateBrowserHistory","applyFilters","history","pushState","state","slice","replaceState","document","title","forEach","filterName","i","ignoreValue","filterValue","getFilterValue","push","name","value","filterElement","querySelector","checked","console","warn","newValue","getUrlParameter","updateFilters","updatedFilter","triggerEvent","filter","find","updateDOM","addEventListener","e","updateURL","prop","filtersArray","tagName","property","item","matchedItems","listItems","children","lastVisibleElement","classList","remove","matched","hasAttribute","el","add","length","Object","assign","updateQueryStringParameter","removeURLParameter","sParam","sPageURL","decodeURIComponent","search","substring","sURLVariables","sParameterName","uri","key","re","RegExp","separator","indexOf","match","replace","parameter","urlparts","log","prefix","encodeURIComponent","pars","lastIndexOf","splice","join"],"mappings":"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","file":"filterList.js","sourcesContent":["/*\n * @name          filterList.js\n * @version       3.0.2\n * @lastmodified  2018-02-05\n * @author        Saeid Mohadjer\n * @repo\t\t  https://github.com/smohadjer/filterList\n *\n * Licensed under the MIT License\n */\n\n'use strict';\n\nclass FilterList {\n\tconstructor(options) {\n\t\tthis.urlIsUpdatable = (options.urlIsUpdatable === undefined) ? false : options.urlIsUpdatable;\n\t\tthis.element = options.element;\n\t\tthis.filters = [];\n\t\tthis.filterNames = this.element.getAttribute('data-filter-names').split(' ');\n\t\tthis.initCallback = options.initCallback;\n\t\tthis.filtersCallback = options.filtersCallback;\n\t\tthis.url = window.location.href;\n\t\tthis.lastClass = options.lastClass || 'last';\n\t\tthis.hiddenClass = options.hiddenClass || 'hidden';\n\n\t\tthis.setEventHandlers();\n\t\tthis.setDefaultFilters(this.filterNames);\n\t\tthis.updateFiltersfromURL();\n\t\tthis.updateBrowserHistory();\n\n\t\tif (typeof this.initCallback === 'function') {\n\t\t\tthis.initCallback();\n\t\t}\n\n\t\tthis.applyFilters();\n\t}\n\n\tupdateBrowserHistory() {\n\t\tif (this.urlIsUpdatable && window.history && window.history.pushState) {\n\t\t\tlet state = {};\n\t\t\tstate.filters = this.filters.slice();\n\t\t\thistory.replaceState(state, document.title, this.url);\n\t\t}\n\t}\n\n\tsetDefaultFilters(filterNames) {\n\t\tfilterNames.forEach((filterName, i) => {\n\t\t\tconst ignoreValue = this.element.getAttribute(`data-filter-${filterName}-ignore`);\n\t\t\tconst filterValue = this.getFilterValue(filterName);\n\n\t\t\tthis.filters.push({\n\t\t\t\tname: filterName,\n\t\t\t\tvalue: filterValue,\n\t\t\t\tignoreValue: ignoreValue\n\t\t\t});\n\t\t});\n\t}\n\n\tgetFilterValue(filterName) {\n\t\tconst filterElement = document.querySelector(`[name=\"${filterName}\"]`);\n\t\tlet filterValue;\n\n\t\tif (filterElement) {\n\t\t\tif (filterElement.getAttribute('type') === 'checkbox') {\n\t\t\t\tfilterValue = filterElement.checked ? filterElement.value : undefined;\n\t\t\t} else {\n\t\t\t\tfilterValue = filterElement.value;\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.warn('No filter with name ' + filterName + ' was found in markup!');\n\t\t}\n\n\t\treturn filterValue;\n\t}\n\n\tupdateFiltersfromURL() {\n\t\tthis.filterNames.forEach((filterName, i) => {\n\t\t\tconst newValue = this.getUrlParameter(filterName);\n\n\t\t\tif (newValue) {\n\t\t\t\tthis.updateFilters({\n\t\t\t\t\tname: filterName,\n\t\t\t\t\tvalue: newValue\n\t\t\t\t}, true);\n\t\t\t}\n\t\t});\n\t}\n\n\tupdateFilters(updatedFilter, triggerEvent) {\n\t\tlet filter = this.filters.find((filter) => filter.name === updatedFilter.name);\n\n\t\tif (filter && filter.value !== updatedFilter.value) {\n\t\t\tfilter.value = updatedFilter.value;\n\t\t\tthis.applyFilters();\n\n\t\t\tif (triggerEvent) {\n\t\t\t\tthis.updateDOM([filter]);\n\t\t\t}\n\t\t}\n\t}\n\n\tsetEventHandlers() {\n\t\tthis.filterNames.forEach((filterName, i) => {\n\t\t\tconst filterElement = document.querySelector('[name=\"' + filterName + '\"]');\n\n\t\t\tif (filterElement) {\n\t\t\t\tfilterElement.addEventListener('change', (e) => {\n\t\t\t\t\tthis.updateFilters({\n\t\t\t\t\t\tname: filterName,\n\t\t\t\t\t\tvalue: this.getFilterValue(filterName)\n\t\t\t\t\t});\n\n\t\t\t\t\tif (this.urlIsUpdatable) {\n\t\t\t\t\t\tthis.updateURL();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tif (this.urlIsUpdatable && window.history && window.history.pushState) {\n\t\t\twindow.addEventListener(\"popstate\", (e) => {\n\t\t\t\tif (e.state.filters) {\n\t\t\t\t\tfor (let prop in e.state.filters) {\n\t\t\t\t\t\tthis.filters[prop] = e.state.filters[prop];\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.updateDOM(e.state.filters);\n\t\t\t\t\tthis.applyFilters();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tupdateDOM(filtersArray) {\n\t\tfor (let i in filtersArray) {\n\t\t\tlet filter = filtersArray[i];\n\t\t\tlet filterElement = document.querySelector(`[name=\"${filter.name}\"]`);\n\n\t\t\tif (filterElement) {\n\t\t\t\tif (filterElement.tagName === 'SELECT') {\n\t\t\t\t\tfilterElement.value = filter.value;\n\t\t\t\t}\n\n\t\t\t\tif (filterElement.tagName === 'INPUT') {\n\t\t\t\t\tif (filterElement.getAttribute('type') === 'checkbox') {\n\t\t\t\t\t\tfilterElement.checked = (filterElement.value === filter.value) ? true : false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//public method for changing filters\n\tsetFilters(filters) {\n\t\tfor (let property in filters) {\n\t\t\tthis.filters.forEach(function(item, i) {\n\t\t\t\tif (item.name === property) {\n\t\t\t\t\titem.value = filters[property];\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tthis.updateDOM(this.filters);\n\t\tthis.applyFilters();\n\n\t\tif (this.urlIsUpdatable) {\n\t\t\tthis.updateURL();\n\t\t}\n\t}\n\n\tapplyFilters() {\n\t\tlet matchedItems = [];\n\t\tconst listItems = this.element.children;\n\n\t\tif (this.lastClass) {\n\t\t\tlet lastVisibleElement = this.element.querySelector(`.${this.lastClass}`);\n\t\t\tif (lastVisibleElement) {\n\t\t\t\tlastVisibleElement.classList.remove(this.lastClass);\n\t\t\t}\n\t\t}\n\n\t\t// If filters are set, only items whose data attributes\n\t\t//match all the set filters would show\n\t\t[...listItems].forEach((element) => {\n\t\t\tlet matched = true;\n\n\t\t\tthis.filters.forEach(function(filter, i) {\n\t\t\t\tif (filter.value !== undefined && filter.value !== filter.ignoreValue) {\n\t\t\t\t\t//any list item that doesn't have attribute for this filter or\n\t\t\t\t\t//has attribute for this filter with another value should\n\t\t\t\t\t//be filtered out.\n\t\t\t\t\tif (!element.hasAttribute('data-filter-' + filter.name) || element.getAttribute('data-filter-' + filter.name) !== filter.value) {\n\t\t\t\t\t\tmatched = false;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (matched) {\n\t\t\t\tmatchedItems.push(element);\n\t\t\t}\n\t\t});\n\n\t\t[...listItems].forEach((el) => {\n\t\t\tel.classList.add(this.hiddenClass);\n\t\t});\n\n\t\tif (matchedItems.length !== 0) {\n\t\t\tmatchedItems.forEach((item, i) => {\n\t\t\t\titem.classList.remove(this.hiddenClass);\n\n\t\t\t\t//add a class to last visible item in the list in case last item in list needs special styling\n\t\t\t\tif (this.lastClass && i === matchedItems.length - 1) {\n\t\t\t\t\titem.classList.add(this.lastClass);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.element.classList.remove('is-empty');\n\t\t} else {\n\t\t\tthis.element.classList.add('is-empty');\n\t\t}\n\n\t\tif (typeof this.filtersCallback === 'function') {\n\t\t\tthis.filtersCallback();\n\t\t}\n\t}\n\n\tupdateURL() {\n\t\tif (window.history && window.history.pushState)\t{\n\t\t\tlet state = {};\n\t\t\tstate.filters = Object.assign({}, this.filters);\n\n\t\t\tthis.filters.forEach((filter) => {\n\t\t\t\tif (filter.value !== undefined && filter.value.length !== 0) {\n\t\t\t\t\tthis.url = this.updateQueryStringParameter(this.url, filter.name, filter.value);\n\t\t\t\t} else {\n\t\t\t\t\tthis.url = this.removeURLParameter(this.url, filter.name);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\thistory.pushState(state, document.title, this.url);\n\t\t}\n\t}\n\n\t//http://stackoverflow.com/questions/19491336/get-url-parameter-jquery-or-how-to-get-query-string-values-in-js\n\tgetUrlParameter(sParam) {\n\t\tvar sPageURL = decodeURIComponent(window.location.search.substring(1)),\n\t\t\tsURLVariables = sPageURL.split('&'),\n\t\t\tsParameterName,\n\t\t\ti;\n\n\t\tfor (i = 0; i < sURLVariables.length; i++) {\n\t\t\tsParameterName = sURLVariables[i].split('=');\n\n\t\t\tif (sParameterName[0] === sParam) {\n\t\t\t\treturn sParameterName[1] === undefined ? true : sParameterName[1];\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateQueryStringParameter(uri, key, value) {\n\t\tvar re = new RegExp(\"([?&])\" + key + \"=.*?(&|$)\", \"i\");\n\t\tvar separator = uri.indexOf('?') !== -1 ? \"&\" : \"?\";\n\n\t\tif (uri.match(re)) {\n\t\t\treturn uri.replace(re, '$1' + key + \"=\" + value + '$2');\n\t\t} else {\n\t\t\treturn uri + separator + key + \"=\" + value;\n\t\t}\n\t}\n\n\tremoveURLParameter(url, parameter) {\n\t    //prefer to use l.search if you have a location/link object\n\t    var urlparts= url.split('?');\n\t    if (urlparts.length >= 2) {\n\t\t\tconsole.log('remove', parameter);\n\n\t        var prefix= encodeURIComponent(parameter)+'=';\n\t        var pars= urlparts[1].split(/[&;]/g);\n\n\t        //reverse iteration as may be destructive\n\t        for (var i= pars.length; i-- > 0;) {\n\t            //idiom for string.startsWith\n\t            if (pars[i].lastIndexOf(prefix, 0) !== -1) {\n\t                pars.splice(i, 1);\n\t            }\n\t        }\n\n\t        url= urlparts[0] + (pars.length > 0 ? '?' + pars.join('&') : \"\");\n\t        return url;\n\t    } else {\n\t        return url;\n\t    }\n\t}\n}\n"]}